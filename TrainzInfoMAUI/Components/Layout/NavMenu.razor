@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Nav
@inject AuthenticationStateProvider AuthStateProvider

<!-- TOP BAR -->
<div class="top-bar">
    <div class="top-bar-left">
        <button class="burger" @onclick="ToggleNavMenu">☰</button>
        <a class="brand" href="/">TrainzInfo</a>
    </div>

    <div class="top-bar-right">
        <img src="https://trainzinfo.com.ua/api/mainimage/getimage?name=MainPhoto"
             class="logo" />
    </div>
</div>

<!-- SIDE MENU -->
<div class="side-menu @(isNavCollapsed ? "hidden" : "visible")">

    <nav class="menu">
        <NavLink href="/" Match="NavLinkMatch.All" class="menu-link">
            🏠 Головна
        </NavLink>

        <NavLink href="ukrains-railways" class="menu-link">
            🚆 Українська залізниця
        </NavLink>

        <NavLink href="trains" class="menu-link">
            📋 Список поїздів
        </NavLink>
    </nav>

    <div class="auth-block">
        <AuthorizeView>
            <Authorized>
                <button class="btn light" @onclick="Profile">👤 Профіль</button>
                <button class="btn danger" @onclick="Logout">🚪 Вийти</button>
            </Authorized>

            <NotAuthorized>
                <button class="btn primary" @onclick="Login">🔐 Вхід</button>
                <button class="btn outline" @onclick="Register">➕ Реєстрація</button>
            </NotAuthorized>
        </AuthorizeView>
    </div>
</div>

@code {
    private bool isNavCollapsed = true;

    private void ToggleNavMenu()
        => isNavCollapsed = !isNavCollapsed;

    private void Login() => Nav.NavigateTo("/login");
    private void Register() => Nav.NavigateTo("/register");
    private void Profile() => Nav.NavigateTo("/profile");
    private void Logout() => Nav.NavigateTo("/logout");
}
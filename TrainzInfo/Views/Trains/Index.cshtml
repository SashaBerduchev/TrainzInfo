@model IEnumerable<TrainzInfo.Models.Train>

@{
    ViewData["Title"] = "Поїзди";
}

<h1 class="text-center my-4">Призначені поїзди</h1>

@if (ViewBag.user != null && ViewBag.user.Role == "Superadmin")
{
    <div class="mb-3 d-flex flex-wrap gap-2">
        <a class="btn btn-info" asp-action="Create">Додати поїзд</a>
        <a class="btn btn-dark" asp-controller="Trains" asp-action="UpdateInfo">Оновити дані</a>
        <a class="btn btn-info" asp-action="AddTrainExcel">Додати поїзд з Excel</a>
        <a class="btn btn-info" asp-controller="TrainsShadules" asp-action="AddStationExcel">Додати графік з Excel</a>
    </div>
}

<form method="get" class="mb-4">
    <div class="form-inline d-flex flex-wrap gap-2">
        @Html.DropDownList("number", ViewBag.number as SelectList,
        htmlAttributes: new { @class = "form-control" })
        <input type="submit" value="Відобразити" class="btn btn-info" />
    </div>
</form>

<!-- Таблиця для великих екранів -->
<div class="d-none d-md-block table-responsive mb-5">
    <table class="table table-striped table-bordered align-middle">
        <thead class="thead-dark">
            <tr>
                <th>Номер</th>
                <th>Прибуття</th>
                <th>Відправлення</th>
                <th>Тип поїзда</th>
                <th>Назва</th>
                <th class="text-center">Дії</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td class="fw-bold">@item.Number</td>
                    <td>@item.StationFrom</td>
                    <td>@item.StationTo</td>
                    <td>@item?.TypeOfPassTrain?.Type</td>
                    <td>@item.NameOfTrain</td>
                    <td class="text-center">
                        @if (item.TrainsShadules?.Count > 0)
                        {
                            <a class="btn btn-info btn-sm d-block w-100 mb-2"
                               asp-controller="TrainsShadules" asp-action="Index" asp-route-id="@item.id">
                                Розклад
                            </a>
                        }
                        @if (ViewBag.user != null && ViewBag.user.Role == "Superadmin")
                        {
                            <a class="btn btn-success btn-sm d-block w-100 mb-2" asp-action="Edit" asp-route-id="@item.id">Редагувати</a>
                            <a class="btn btn-outline-danger btn-sm d-block w-100 mb-2"
                               asp-controller="TrainsShadules" asp-action="Create" asp-route-numbertr="@item.Number">
                                Додати розклад
                            </a>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Картки для мобільних -->
<div class="d-block d-md-none">
    @foreach (var item in Model)
    {
        <div class="card mb-3 shadow-sm">
            <div class="card-body">
                <h5 class="card-title fw-bold">Поїзд №@item.Number</h5>
                <p class="card-text mb-1"><b>Прибуття:</b> @item.StationFrom</p>
                <p class="card-text mb-1"><b>Відправлення:</b> @item.StationTo</p>
                <p class="card-text mb-1"><b>Тип:</b> @item?.TypeOfPassTrain?.Type</p>
                <p class="card-text"><b>Назва:</b> @item.NameOfTrain</p>

                @if (item.TrainsShadules?.Count > 0)
                {
                    <a class="btn btn-info btn-sm w-100 mb-2"
                       asp-controller="TrainsShadules" asp-action="Index" asp-route-id="@item.id">
                        Розклад
                    </a>
                }
                @if (ViewBag.user != null && ViewBag.user.Role == "Superadmin")
                {
                    <a class="btn btn-success btn-sm w-100 mb-2" asp-action="Edit" asp-route-id="@item.id">Редагувати</a>
                    <a class="btn btn-outline-danger btn-sm w-100"
                       asp-controller="TrainsShadules" asp-action="Create" asp-route-numbertr="@item.Number">
                        Додати розклад
                    </a>
                }
            </div>
        </div>
    }
</div>


<style>
    body {
        background: url(https://klike.net/uploads/posts/2020-04/1586763576_18.jpg);
    }
</style>
<style type="text/css">
    td {
        background-color: aliceblue; /* Цвет фона */
        position: center;
        padding: 5px; /* Поля в ячейках */
        opacity: 1.9; /* Полупрозрачность таблицы */
        filter: alpha(Opacity=50); /* Для IE */
        width: 800px;
        color: cornflowerblue;
        text-decoration: solid;
    }
</style>


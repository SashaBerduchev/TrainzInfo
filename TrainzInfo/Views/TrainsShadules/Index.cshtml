@model IEnumerable<TrainzInfo.Models.TrainsShadule>

@{
    ViewData["Title"] = "Розклад поїздів";
}


<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Index</title>

<div class="mb-3">
    @if (ViewBag.user != null)
    {
        if (ViewBag.user.Role == "Superadmin")
        {
            <a class="btn btn-info m-1" asp-action="Create" asp-route-numbertr="@ViewBag.traininfo.Number">Додати зупинку</a>
            <a class="btn btn-dark m-1" asp-action="UpdateInfo" asp-route-numbertr="@ViewBag.traininfo.Number">Оновити дані</a>
            <a class="btn btn-danger m-1" asp-action="Truncate" asp-route-numbertr="@ViewBag.traininfo.Number">Видалити графік</a>
        }
    }
</div>

<h2 class="fw-bold text-center mb-3">
    Поїзд № @ViewBag.traininfo.Number <br />
    сполученням: @ViewBag.traininfo.StationFrom – @ViewBag.traininfo.StationTo
</h2>

<!-- Таблиця для великих екранів -->
<div class="table-responsive d-none d-md-block">
    <table class="table table-striped table-bordered text-center align-middle">
        <thead class="table-dark">
            <tr>
                <th>Назва станції</th>
                <th>Час прибуття</th>
                <th>Час відправлення</th>
                <th>Відстань</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td style="font-size:18px">
                        @if (item.Stations is not null)
                        {
                            <a asp-controller="Stations" asp-action="Details" asp-route-id="@item.Stations.id">
                                @Html.DisplayFor(modelItem => item.NameStation)
                            </a>
                        }
                        else
                        {
                            @Html.DisplayFor(modelItem => item.NameStation)
                        }
                    </td>
                    <td style="font-size:16px">@Html.DisplayFor(modelItem => item.Arrival)</td>
                    <td style="font-size:16px">@Html.DisplayFor(modelItem => item.Departure)</td>
                    <td style="font-size:16px">@Html.DisplayFor(modelItem => item.Distance)</td>
                    <td>
                        @if (ViewBag.user?.Role == "Superadmin")
                        {
                            <a class="btn btn-success btn-sm" asp-action="edit" asp-route-id="@item.id">Редагувати</a>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Картки для мобільних -->
<div class="d-block d-md-none">
    @foreach (var item in Model)
    {
        <div class="card mb-3 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">
                    @if (item.Stations is not null)
                    {
                        <a asp-controller="Stations" asp-action="Details" asp-route-name="@item.Stations.Name">
                            @Html.DisplayFor(modelItem => item.NameStation)
                        </a>
                    }
                    else
                    {
                        @Html.DisplayFor(modelItem => item.NameStation)
                    }
                </h5>
                <p class="card-text mb-1"><b>Прибуття:</b> @item.Arrival</p>
                <p class="card-text mb-1"><b>Відправлення:</b> @item.Departure</p>
                <p class="card-text mb-2"><b>Відстань:</b> @item.Distance км</p>

                @if (ViewBag.user?.Role == "Superadmin")
                {
                    <a class="btn btn-success btn-sm" asp-action="edit" asp-route-id="@item.id">Редагувати</a>
                }
            </div>
        </div>
    }
</div>

<div class="mt-3">
    <a class="btn btn-info" asp-controller="Trains" asp-action="Index">До списку поїздів</a>
</div>

@if (null != TempData["alertMessage"])
{
    <script type="text/javascript">
        alert("@TempData["alertMessage"]");
    </script>
}
<style>
    body {
        background: url(https://klike.net/uploads/posts/2020-04/1586763576_18.jpg);
    }
</style>
<style type="text/css">
    td {
        background-color: aliceblue; /* Цвет фона */
        position: relative;
        padding: 5px; /* Поля в ячейках */
        opacity: 1.9; /* Полупрозрачность таблицы */
        filter: alpha(Opacity=50); /* Для IE */
        width: 700px;
        color: cornflowerblue;
        text-decoration: solid;
    }

    tr {
        display: table-row;
        vertical-align: inherit;
        unicode-bidi: isolate;
        border-color: inherit;
        margin: 25px;
        padding: 15px;
    }
</style>